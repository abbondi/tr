function shuffle(a){for(var c,d,b=a.length;0!==b;)d=Math.floor(Math.random()*b),b-=1,c=a[b],a[b]=a[d],a[d]=c;return a}function ricomincia(){homePage()}function myReturnHandler(a){return a}function scaricaOracolo(a,b,c){function e(a){oracoliTxt[c]=a}var d="http://www.massimoabbondi.it/apps/zoit/data/oracolo.php";$.ajax({url:d,dataType:"jsonp",data:{Argomento:a,CodC:b},error:function(){},success:e})}function mostraOracolo(a,b,c){var d="";if("cdg"==b)d="ee7d00";else switch(a){case"A1":d="e00d4f";break;case"A2":d="009a32";break;case"A3":d="543187";break;case"A4":d="009bdd";break;default:d="ee7d00"}$(".pagine").append('<div id="oracolo" class="pagina"><div id="contenitore-pergamena"></div></div>'),$("#contenitore-pergamena").css({"background-color":"#"+d}),$("#contenitore-pergamena").html('<div id="pergamena"><div class="swiper-container"><div class="swiper-wrapper"><div class="swiper-slide"><div class="slide-inner">'+oracoliTxt[c]+'<p>&nbsp;</p><p>&nbsp;</p></div></div></div></div><div class="swiper-scrollbar"></div></div>'),new Swiper(".swiper-container",{scrollContainer:!0,mousewheelControl:!0,mode:"vertical",scrollbar:{container:".swiper-scrollbar",hide:!0,draggable:!1}})}function styleAnimaz(){var a=Math.floor(.9*$(window).width()),b=Math.floor(.8*$(window).height()),c=0,d=0,e=1.85,f=Math.ceil(.8*$(window).height()/64);b>=.77*a*e?(c=a,d=Math.ceil(.77*a*e)):(c=Math.ceil(1.3*(b/e)),d=b);var g=Math.floor(c/6),h=Math.floor(c/6*e),j=0,k=0,l=0,m=.9*g/(.25*c),n=d-Math.floor(.5*(d-.25*c*e))-.5*(.25*c*e-.25*c*e*m)-.5*.9*h;for(i=0;24>i;i++)(6==i||12==i||18==i)&&(j++,k=0),18==i||($("<style type='text/css'> .pagine #c"+l+" {top:"+(d-.5*h)+"px;left:"+.5*(c-Math.floor(.167*c))+"px;} </style>").appendTo("head"),$("<style type='text/css'> @-webkit-keyframes c"+l+"s{0%{-webkit-transform: translateX( "+0+"px ) translateY( "+0+"px );}100%{-webkit-transform: translateX( "+(k*g-.5*(c-Math.floor(.167*c)))+"px ) translateY( "+(j*h-(d-.5*h))+"px );}} </style>").appendTo("head"),$("<style type='text/css'> @-webkit-keyframes c"+l+"sBig{0%{scale(0.225,0.225);}100%{-webkit-transform: translateX( "+(0-(k*g-.5*(c-Math.floor(.167*c))))+"px ) translateY( "+(-2.5*h-(j*h-(d-.5*h)))+"px ) scale(1,1);}} </style>").appendTo("head"),l++),k++;$("<style type='text/css'> .pagine #contenitore-pergamena{top:"+Math.floor(.2*$(window).height())+"px;height:"+Math.floor(.755*$(window).height())+"px;} </style>").appendTo("head"),$("<style type='text/css'> .swiper-container{top:"+Math.floor(.05*.755*$(window).height())+"px;height:"+Math.floor(.9*.755*$(window).height())+"px;width:"+Math.floor(.75*$(window).width()-.1*.755*$(window).height())+"px;} </style>").appendTo("head"),$("<style type='text/css'> .pagine #main{top:"+Math.ceil(.2*$(window).height())+"px;height:"+Math.floor(.8*$(window).height())+"px;} </style>").appendTo("head"),$("<style type='text/css'> .pagine #main .segnaposto{margin-top:"+3*f+"px;height:"+7*f+"px;padding:0;} </style>").appendTo("head"),$("<style type='text/css'> .pagine #mescolacarte, #abbassacarte{width:"+c+"px;height:"+d+"px;top:"+Math.ceil(.2*$(window).height())+"px;} </style>").appendTo("head"),$("<style type='text/css'> .pagine .spread{width:"+.25*c+"px;height:"+.25*c*e+"px;margin: "+Math.floor(.5*(d-.25*c*e))+"px auto 0 auto;} </style>").appendTo("head"),$("<style type='text/css'> .pagine .card, .pagine .dorso{border-radius: "+Math.floor(.036*.25*c*e)+"px;border:"+Math.floor(.036*.05*c*e)+"px solid #fff;} </style>").appendTo("head"),$("<style type='text/css'> .pagine .cartaScelta{width:"+1*4*g+"px;height:"+1*4*h+"px;-webkit-transform: scale(0.225,0.225);} </style>").appendTo("head"),$("<style type='text/css'> .pagine .carta{width:"+g+"px;height:"+h+"px;} </style>").appendTo("head"),$("<style type='text/css'> @-webkit-keyframes cAnimates{0%{-webkit-transform: translateX( 0px ) translateY( 0px );}100%{-webkit-transform: translateX( "+.5*(c-Math.floor(.167*c))+"px ) translateY( "+(d-.5*h)+"px );}} </style>").appendTo("head"),$("<style type='text/css'> @-webkit-keyframes mischiat0	{	0% {-webkit-transform: translateX( 0px ) translateY( 0px ) rotate(-10deg) scale(1,1);}	100% {-webkit-transform: translateX( 0px ) translateY( "+n+"px ) rotate(0) scale("+m+","+m+");}}</style>").appendTo("head"),$("<style type='text/css'> @-webkit-keyframes mischiat1	{	0% {-webkit-transform: translateX( 0px ) translateY( 0px ) rotate(-12deg) scale(1,1);}	100% {-webkit-transform: translateX( 0px ) translateY( "+n+"px ) rotate(0) scale("+m+","+m+");}}</style>").appendTo("head"),$("<style type='text/css'> @-webkit-keyframes mischiat2	{	0% {-webkit-transform: translateX( 0px ) translateY( 0px ) rotate(4deg)   scale(1,1);}	100% {-webkit-transform: translateX( 0px ) translateY( "+n+"px ) rotate(0) scale("+m+","+m+");}}</style>").appendTo("head"),$("<style type='text/css'> @-webkit-keyframes mischiat3	{	0% {-webkit-transform: translateX( 0px ) translateY( 0px ) rotate(-3deg)  scale(1,1);} 	100% {-webkit-transform: translateX( 0px ) translateY( "+n+"px ) rotate(0) scale("+m+","+m+");}}</style>").appendTo("head")}function mostraCarte(a){function j(){$(".pagine .carta").on("click",function(){$(".pagine .carta").unbind("click");var c="c"+casualeIndex1[$(this).attr("id").split("c")[1]],d="";switch(scaricaOracolo(a,c,1),c){case"c0":d="0 0";break;case"c1":d="20% 0";break;case"c2":d="40% 0";break;case"c3":d="60% 0";break;case"c4":d="80% 0";break;case"c5":d="0 20%";break;case"c6":d="20% 20%";break;case"c7":d="40% 20%";break;case"c8":d="60% 20%";break;case"c9":d="80% 20%";break;case"c10":d="0 40%";break;case"c11":d="20% 40%";break;case"c12":d="40% 40%";break;case"c13":d="60% 40%";break;case"c14":d="80% 40%";break;case"c15":d="0 60%";break;case"c16":d="20% 60%";break;case"c17":d="40% 60%";break;case"c18":d="60% 60%";break;case"c19":d="80% 60%";break;case"c20":d="0 80%";break;case"c21":d="20% 80%";break;default:d="0 0"}$(".pagine #cartaF .back").css({"background-position":d});var e=$(this);$(".pagine .carta").addClass("opacizza"),e.removeClass("opacizza"),setTimeout(function(){$("<style type='text/css'> .ingrandisci {-webkit-animation: "+e.attr("id")+"sBig 1.0s ease forwards !important;z-index:80;}</style>").appendTo("head"),$(".pagine .cartaScelta").css({top:e.position().top-.5*(4*h-.225*4*h)+"px",left:e.position().left-.5*(4*g-.225*4*g)+"px",visibility:"visible"}),e.css("display","none"),$(".pagine .cartaScelta").addClass("ingrandisci"),$(".pagine #cartaF").addClass("flipped"),setTimeout(function(){$(".pagine .opacizza").css("opacity","0"),$(".scopri").css("display","block"),$(".scopri").on("click",function(){$(".scopri").css("display","none"),$(".pagine #areacarte").addClass("homeLeft"),mostraOracolo(a,c,1)})},1e3)},200)})}var b=Math.floor(.9*$(window).width()),c=Math.floor(.8*$(window).height()),d=0,e=0,f=1.85;c>=.77*b*f?(d=b,e=Math.ceil(.77*b*f)):(d=Math.ceil(1.3*(c/f)),e=c);var g=Math.floor(d/6),h=Math.floor(d/6*f);c>=.77*b*f?(d=b,e=Math.ceil(.77*b*f)):(d=Math.ceil(1.3*(c/f)),e=c);var g=Math.floor(d/6),h=Math.floor(d/6*f);for(i=0;22>i;i++)$("#c"+i+" .dorso p").html(casualeIndex1[i]+1),0==casualeIndex1[i]?$("#c"+i+" .dorso p").css("color","#f00"):$("#c"+i+" .dorso p").css("color","#000");$("#areacarte").css({top:Math.ceil(.2*$(window).height())+"px",width:d+"px",height:e+"px"}),$("#cartaF .front, #cartaF .back").setBorderRadius(Math.floor(4*.036*.9*d/6*f)+"px"),$("#tavolocarte").css("display","block"),setTimeout(function(){j()},2e3)}function mescolaCarte(a){switch($(".pagine").append(pagineTxt[2]),a){case"A1":$(".pagine .card, .pagine .dorso, .pagine #cartaF .front").css("background-position","0 0");break;case"A2":$(".pagine .card, .pagine .dorso, .pagine #cartaF .front").css("background-position","25% 0");break;case"A3":$(".pagine .card, .pagine .dorso, .pagine #cartaF .front").css("background-position","50% 0");break;case"A4":$(".pagine .card, .pagine .dorso, .pagine #cartaF .front").css("background-position","75% 0");break;default:$(".pagine .card, .pagine .dorso, .pagine #cartaF .front").css("background-position","0 0")}$(".mescola").css("display","block"),$(".pagine #mescolacarte").click(function(){$(".pagine #mescolacarte").css("display","none"),$(".mescola").css("display","none"),$(".pagine #abbassacarte").css("display","block");var b=setTimeout(function(){clearTimeout(b),$(".pagine #abbassacarte").css("display","none"),mostraCarte(a)},1e3)})}function homePage(){$(".pagine").html(pagineTxt[1]),$(".pagine #A1").addClass("A1in"),$(".pagine #A3").addClass("A3in"),$(".pagine #A2").addClass("A2in"),$(".pagine #A4").addClass("A4in"),$(".pagine .consiglio").addClass("consiglioin"),shuffle(casualeIndex1),$(".pagine .argomento").click(function(){var a=$(this).attr("id");$(".pagine #home").addClass("homeLeft"),mescolaCarte(a)}),$(".consiglio").click(function(){$(".pagine #home").addClass("homeLeft"),mostraOracolo("A1","cdg",0)})}function appInizia(){scaricaOracolo("A1","cdg",0),styleAnimaz(),$("#contenuto").css({height:$(window).height()+"px",width:$(window).width()+"px"}),$("#cielo").css({height:2*$(window).height()+"px",width:2*$(window).height()+"px",left:-.5*$(window).height()+"px",top:-.5*$(window).height()+"px",display:"block"}),$(".pubblicita").css({top:Math.floor(.075*$(window).height())+"px",height:Math.floor(.08*$(window).height())+"px"}),$("#anteprima").css("z-index","99"),$("#sfondo").css("display","none"),setTimeout(function(){$("#anteprima").css("display","none")},800),$(".backhome").click(function(){$(".pagine .pagina").addClass("fadeOut"),setTimeout(function(){ricomincia()},1e3)}),$(".pubblicita").css("display","block"),pubInt=0,setInterval(function(){$(".pubblicita").css("background-position","50% "+25*pubInt+"%"),pubInt++,pubInt>3&&(pubInt=0)},15e3),$("#anteprima").addClass("fadeOut"),homePage()}function riprova(){$("#riprova").css("display","none"),$("#sfondo").removeClass("errore"),testConn()}function doConnectFunction(){appInizia()}function doNotConnectFunction(){$("#sfondo").addClass("errore"),$("#riprova").css("display","block"),$("#riprova").click(function(){riprova()})}function testConn(){var a=new Image;a.onload=doConnectFunction,a.onerror=doNotConnectFunction,a.src="http://www.massimoabbondi.it/apps/test.gif?d="+escape(Date())}var pagineTxt=["",'<div id="home" class="pagina"><div id="main"><div class="segnaposto argomento" id="A1"><div class="icona"></div></div><div class="segnaposto argomento" id="A3"><div class="icona"></div></div><div class="segnaposto argomento" id="A2"><div class="icona"></div></div><div class="segnaposto argomento" id="A4"><div class="icona"></div></div><div class="segnaposto consiglio"><div class="icona"></div></div></div></div>','<div id="mescolacarte" class="pagina"><div class="hand spread">	<div class="card suit1" id="s0"></div><div class="card suit2" id="s1"></div><div class="card suit3" id="s2"></div><div class="card suit4" id="s3"></div><div class="card suit1" id="s4"></div><div class="card suit2" id="s5"></div><div class="card suit3" id="s6"></div><div class="card suit4" id="s7"></div><div class="card suit1" id="s8"></div><div class="card suit2" id="s9"></div><div class="card suit3" id="s10"></div><div class="card suit4" id="s11"></div><div class="card suit1" id="s12"></div><div class="card suit2" id="s13"></div><div class="card suit3" id="s14"></div><div class="card suit4" id="s15"></div><div class="card suit1" id="s16"></div><div class="card suit2" id="s17"></div><div class="card suit3" id="s18"></div><div class="card suit4" id="s19"></div><div class="card suit1" id="s20"></div><div class="card suit3" id="s21"></div><div style="clear:both;"></div></div> </div><div id="abbassacarte" class="pagina" style="display:none;"><div class="hand spread">	<div class="card suit1 raddrizza0" id="as0"></div><div class="card suit2 raddrizza1" id="as1"></div><div class="card suit3 raddrizza2" id="as2"></div><div class="card suit4 raddrizza3" id="as3"></div><div class="card suit1 raddrizza0" id="as4"></div><div class="card suit2 raddrizza1" id="as5"></div><div class="card suit3 raddrizza2" id="as6"></div>		<div class="card suit4 raddrizza3" id="as7"></div><div class="card suit1 raddrizza0" id="as8"></div><div class="card suit2 raddrizza1" id="as9"></div><div class="card suit3 raddrizza2" id="as10"></div><div class="card suit4 raddrizza3" id="as11"></div><div class="card suit1 raddrizza0" id="as12"></div><div class="card suit2 raddrizza1" id="as13"></div><div class="card suit3 raddrizza2" id="as14"></div><div class="card suit4 raddrizza3" id="as15"></div><div class="card suit1 raddrizza0" id="as16"></div><div class="card suit2 raddrizza1" id="as17"></div><div class="card suit3 raddrizza2" id="as18"></div><div class="card suit4 raddrizza3" id="as19"></div><div class="card suit1 raddrizza0" id="as20"></div><div class="card suit3 raddrizza1" id="as21"></div><div style="clear:both;"></div></div> </div><div id="tavolocarte" class="pagina" style="display:none;"><div id="areacarte"><div class="carta"></div><div class="carta" id="c21"><div class="dorso"><p>-</p></div></div><div class="carta" id="c20"><div class="dorso"><p>-</p></div></div><div class="carta" id="c19"><div class="dorso"><p>-</p></div></div><div class="carta" id="c18"><div class="dorso"><p>-</p></div></div><div class="carta"></div><div class="carta" id="c17"><div class="dorso"><p>-</p></div></div><div class="carta" id="c16"><div class="dorso"><p>-</p></div></div><div class="carta" id="c15"><div class="dorso"><p>-</p></div></div><div class="carta" id="c14"><div class="dorso"><p>-</p></div></div><div class="carta" id="c13"><div class="dorso"><p>-</p></div></div><div class="carta" id="c12"><div class="dorso"><p>-</p></div></div><div class="carta" id="c11"><div class="dorso"><p>-</p></div></div><div class="carta" id="c10"><div class="dorso"><p>-</p></div></div><div class="carta" id="c9"><div class="dorso"><p>-</p></div></div><div class="carta" id="c8"><div class="dorso"><p>-</p></div></div><div class="carta" id="c7"><div class="dorso"><p>-</p></div></div><div class="carta" id="c6"><div class="dorso"><p>-</p></div></div><div class="carta" id="c5"><div class="dorso"><p>-</p></div></div>            <div class="carta" id="c4"><div class="dorso"><p>-</p></div></div><div class="carta" id="c3"><div class="dorso"><p>-</p></div></div><div class="carta" id="c2"><div class="dorso"><p>-</p></div></div><div class="carta" id="c1"><div class="dorso"><p>-</p></div></div><div class="carta" id="c0"><div class="dorso"><p>-</p></div></div><div class="cartaScelta"><div id="cartaF"><div class="front"></div><div class="back"></div></div></div></div></div>'],oracoliTxt=["",""],casualeIndex1=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21];$.fn.setBorderRadius=function(a,b,c,d){b=b||a,c=c||a,d=d||b;var e={"-moz-border-radius":a+" "+b+" "+c+" "+d,"-webkit-border-radius":a+" "+b+" "+c+" "+d,"border-radius":a+" "+b+" "+c+" "+d};return this.css(e)};